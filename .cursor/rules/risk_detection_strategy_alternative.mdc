---
alwaysApply: true
---
# üå§Ô∏è Alternative Risikoanalyse (aktiv, mit Bericht)

## üß™ Testziel

Diese Regel definiert eine alternative Risikoanalyse, die ohne klassische Schwellwerte auskommt (au√üer bei Regen) und auf direkten, robusten Datenfeldern basiert. Sie erzeugt einen eigenen **Zusatzbericht** innerhalb der E-Mail, um die Resultate mit der Standardlogik zu vergleichen.

---

## üîç Risiken & Analyse

### üî• Hitze
- **Prim√§r**: `daily.temperature_2m_max` (API liefert direkt das Tagesmaximum)
- **Fallback**: `hourly.temperature_2m` (Maximum √ºber 24h: 00:00-23:59)
- Bewertung: Reiner Info-Wert mit H√∂chsttemperatur

### ‚ùÑÔ∏è K√§lte (Nacht)
- **Prim√§r**: `daily.temperature_2m_min` (API liefert direkt das Tagesminimum)
- **Fallback**: `hourly.temperature_2m` (Minimum √ºber Nacht: 22:00-06:00)
- Bewertung: Reiner Info-Wert mit Tiefsttemperatur

### üåßÔ∏è Regen
- Prim√§r: `hourly.precipitation_probability`, `hourly.precipitation`
- Alternativ: `daily.precipitation_sum`, `showers_sum`, `precipitation_hours`
- Bewertung: Meldung bei **‚â•‚ÄØ50‚ÄØ% Regenwahrscheinlichkeit** UND **>‚ÄØ2‚ÄØmm/h Regenmenge**
- **Einheiten**: mm/h (pro Stunde), beide Bedingungen unabh√§ngig pr√ºfen

### ‚õàÔ∏è Gewitter
- Prim√§r: `hourly.weathercode` (Codes f√ºr Thunderstorm)
- Optional: `hourly.cape > 800` als Risikoindikator
- Bewertung: Warnung bei expliziten Gewitter-Codes
- **WMO-Codes f√ºr Gewitter**: 95, 96, 97, 98, 99
  - 95: Thunderstorm, slight or moderate
  - 96: Thunderstorm with slight hail
  - 97: Thunderstorm with heavy hail
  - 98: Thunderstorm, slight or moderate, with rain and/or snow
  - 99: Thunderstorm with heavy rain and/or snow

### üå¨Ô∏è Wind / B√∂en
- Prim√§r: `hourly.wind_speed_10m`, `gusts_10m`
- Alternativ: `daily.wind_speed_10m_max`, `gusts_10m_max`
- Bewertung: Anzeige bei Windspitzen >‚ÄØ30‚ÄØkm/h
- **Einheiten**: API-Ausgabe verwenden (meist km/h oder m/s)

---

## üì® E-Mail-Ausgabe

- Der alternative Risikobericht wird in **Plaintext** erzeugt
- Ausgabe erfolgt **nach dem Standard-Risikobericht**, getrennt durch:
  
```
---

## üîç Alternative Risikoanalyse
```

---

## ‚öôÔ∏è Implementierungsdetails

### Zeitfenster
- **Hitze**: API liefert direkt `daily.temperature_2m_max` (Tagesmaximum)
- **K√§lte**: API liefert direkt `daily.temperature_2m_min` (Tagesminimum)
- **Fallback**: Nur bei fehlenden daily-Werten ‚Üí st√ºndliche Aggregation

### Regen-Bedingungen
- Beide Bedingungen werden **unabh√§ngig** gepr√ºft:
  - ‚â• 50% Regenwahrscheinlichkeit
  - > 2 mm/h Regenmenge
- Meldung erfolgt bei Erf√ºllung beider Kriterien

### Fehlerbehandlung
- Bei fehlenden Datenfeldern: Fehler ausgeben
- Kein Fallback auf Standardlogik

### Modul-Architektur
- Separate Implementierung ohne Beeinflussung bestehenden Codes
- Neues Modul: `src/risiko/alternative_risk_analysis.py`
  